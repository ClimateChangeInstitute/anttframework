<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="images/favicon.ico">

<title>CCI Tephra Database - Database</title>

<!-- Bootstrap core CSS -->
<link href="index_files/bootstrap/css/bootstrap.css" rel="stylesheet">

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<link href="index_files/ie10-viewport-bug-workaround.css"
	rel="stylesheet">

<!-- Custom styles for this template -->
<link href="index_files/sticky-footer-navbar.css" rel="stylesheet">
<link href="index_files/custom.css" rel="stylesheet">
<link href="index_files/angular-busy.min.css" rel="stylesheet">

<!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
<!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
<script src="index_files/ie-emulation-modes-warning.js"></script>

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<script src="index_files/jquery.js"></script>
<script type="text/javascript">
	    function checkToDownload(e) {
	    	
	    	if (e.checked) {
	    		$('input:checkbox[id^="' + e.id + '-' + '"]').each(function(i, j) {
		    		$(j).prop( "checked", true );
	 			});
	    	}
	    	else {
	    		$('input:checkbox[id^="' + e.id + '-' + '"]').each(function(i, j) {
		    		$(j).prop( "checked", false );
	 			});
	    	}
	 	}
</script>

</head>

<body>

	<!-- Fixed navbar -->
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#navbar" aria-expanded="false"
					aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="index.html">AntT</a>
			</div>
			<div id="navbar" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li><a href="about.html">About</a></li>
					<li><a href="database.html">Database</a></li>
					<li class="active"><a href="results.html">Compare Data</a></li>
					<li><a href="methodology.html">Methodology</a></li>
					<li><a href="team.html">Team</a></li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</nav>

	<!-- Begin page content -->
	<div class="container">
		<br> <br>
		<div class="row">
			<div class="col-md-12">
				<button class="btn btn-lg btn-block btn-primary" data-toggle="modal"
					data-target="#search">Click to compare with your data</button>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<div class="pull-right">
					<div class="checkbox">
						<label> <input onclick="check()" id="choice" type="checkbox" value="" checked>
							Preserve old search results
						</label>
					</div>
				</div>
			</div>
		</div>
		<br> <br>

		<div ng-app="exampleApp" ng-cloak>
			<div ng-controller="results">

				<div class="row">
					<div class="col-sm-9">
						<h3>Search Query Results</h3>
					</div>
					<div class="col-sm-3">
						<form class="form-inline">
							<div class="form-group" style="margin-top: 17px;">
								<label for="searchText1">Search :</label> <input
									class="form-control" ng-model="searchText"
									placeholder="keyword (displayed fields)">
							</div>
						</form>
					</div>
				</div>
				<hr>

				<div cg-busy="{promise:promise,message:message}">
					<div ng-hide="filtered[0].length == 0">
						
						<div class="alert alert-info alert-dismissible" role="alert">
							<button type="button" class="close" data-dismiss="alert"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<strong>Heads up!</strong> Click on a sampleID below to see the full information about the sample or click the black arrow to see element data.
						</div>

						<div ng-repeat="search in filtered | filter:searchText">
							<div class="panel panel-default">
								<div class="panel-body">
									<div class="row">
										<div class="col-sm-12">
											<div class="pull-right">
												<button type="button" class="btn btn-primary">Download selected</button>
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-sm-12">
											<h3>Search for {{search.s}}</h3>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-md-12">
											<div class="row">
												<div class="col-md-1">
													
												</div>
												<div class="col-md-4">
													<strong>Similarity Coefficient</strong>
												</div>
												<div class="col-md-4">
													<strong>Sample ID</strong> 
												</div>
												<div class="col-md-3">
													<strong>Download</strong> 
													<div class="do-inline checkbox">
													(<label> <input id="s-{{search.count}}" onclick="checkToDownload(this)" type="checkbox" value=""> select all
													</label>)
												</div>
												</div>
											</div>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-md-12">
											<div ng-repeat="o in search.searchRes">
												<div class="panel-samples panel panel-default">
													<div class="q panel-heading remove-color">
														<div class="row">
															<div class="col-md-1">
																<span class="collapsed" data-parent="#accordion" data-toggle="collapse" data-target="#{{search.count}}-{{o.mme.sampleID}}"></span>
															</div>
															<div class="col-md-4">
																{{o.simVal | number:2}}
															</div>
															<div class="col-md-4">
																<a class="special" href="{{o.mme.sampleType}}.html?id={{o.mme.sampleID}}"> {{o.mme.sampleID}}</a>
															</div>
															<div class="col-md-3">
																<td><input type="checkbox" id="s-{{search.count}}-{{o.mme.sampleID}}"></td>
															</div>
														</div>
													</div>
													<div id="{{search.count}}-{{o.mme.sampleID}}" class="panel-body collapse">
														<div class="row">
															<div class="col-sm-9">
																<p>
																	<strong>Sample ID: </strong>{{o.mme.sampleID}}
																</p>
																<p>
																	<strong>Sample Type: </strong>{{o.mme.longsampleID}}
																</p>
															</div>
															<div class="col-sm-3">
																<p>
																	<strong>Collection Date: </strong>{{o.mme.dateMeasured}}
																</p>
																<p>
																	<strong>Collected By: </strong>{{o.mme.measuredBy}}
																</p>
															</div>
														</div>
														<div class="row">
															<div class="col-sm-12">
																<h3>Geochemical Data</h3>
															</div>
														</div>
														<hr>
														<div class="row" ng-hide="o.mme.elementData == null">
															<div class="col-md-12 table-responsive">
																<table class="table table-hover table-condensed">
																	<thead>
																		<tr>
																			<th>Element</th>
																			<th>%</th>
																			<th>std</th>
																			<th>unit</th>
																			<th>me</th>
																		</tr>
																	</thead>
																	<tbody>
																		<tr ng-repeat="e in o.mme.elementData">
																			<td ng-bind-html="e.format | unsafe"></td>
																			<td>{{e.value | number:3}}</td>
																			<td>{{e.std}}</td>
																			<td>{{e.unit}}</td>
																			<td>{{e.me}}</td>
																		</tr>
																	</tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							</a>
						</div>
					</div>
					<div ng-show="filtered[0].length == 0" class="row">
						<div class="col-md-12 text-center">
							There are no search results to display.
						</div>
					</div>
				</div>
			</div>
		</div>



		<!-- Modal -->
		<div id="search" class="modal fade" role="dialog">
			<div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Tephra Database Search</h4>
					</div>
					<form class="form-horizontal">
						<div class="modal-body">
							<p>Fill in any of the following (Please normalize data to 100%):</p>
							<br>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">SiO<sub>2</sub>:
								</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-sio2">
									<div class="input-group-addon">%</div>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">TiO<sub>2</sub>:
								</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-tio2">
									<div class="input-group-addon">%</div>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">Al<sub>2</sub>O<sub>3</sub>:
								</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-al2o3">
									<div class="input-group-addon">%</div>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">FeO:</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-feo">
									<div class="input-group-addon">%</div>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">MnO:</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-mno">
									<div class="input-group-addon">%</div>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">MgO:</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-mgo">
									<div class="input-group-addon">%</div>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">CaO:</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-cao">
									<div class="input-group-addon">%</div>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">Na<sub>2</sub>O:
								</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-na2o">
									<div class="input-group-addon">%</div>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">K<sub>2</sub>O:
								</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-k2o">
									<div class="input-group-addon">%</div>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-xs-2 col-form-label" for="">P<sub>2</sub>O<sub>5</sub>:
								</label>
								<div class="input-group col-xs-9">
									<input type="text" class="form-control" id="element-p2o5">
									<div class="input-group-addon">%</div>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">Close</button>
							<button onclick="searchCall()" id="search-confirm" type="button"
								class="btn btn-primary" data-dismiss="modal">Search</button>

						</div>
					</form>
				</div>

			</div>
		</div>
		<br> <br> <br>
	</div>

	<footer class="footer">
		<div class="container">
			<p>
				<img class="footer-img" alt="UMaine CCI" src="./images/ccilogo.svg">
				<img class="footer-img" alt="NMT" src="./images/nmtLogo.svg">
			</p>
			<p>
				Copyright &copy; 
				<script>
					var d = new Date();
					document.write(d.getFullYear());
				</script>
				 Antarctic Tephra Database
			</p>
		</div>
	</footer>


	<!-- Bootstrap core JavaScript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="./js/antt.js" type="text/javascript"></script>
	<script>
		window.jQuery
				|| document
						.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>');

		function searchCall() {
			antt.builtUrl($("#choice").is(':checked'));
		}
		function check() {
			if(document.getElementById('choice').checked) {
	            localStorage.setItem('choice', "true");
	        } else {
	            localStorage.setItem('choice', "false");
	        }
		}
		
		getStatus = localStorage.getItem('choice');
	    if (getStatus == "true") {
	        document.getElementById("choice").checked = true;
	    }


	</script>
	<script src="index_files/bootstrap/js/bootstrap.js"></script>
	<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
	<script src="index_files/ie10-viewport-bug-workaround.js"></script>

	<script src="./lib/angular.min.js"></script>

	<script src="./lib/angular-busy.js"></script>

	<script src="./lib/xml2json.js"></script>

	<script src="./js/results.module.js"></script>

</body>
</html>